{% extends "base.html" %}
{% load widget_tweaks %}

{% block title %}
  –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ ‚Äî {{ quiz.title }}
{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card bg-dark text-light shadow-lg rounded-4 border-info">
    <div class="card-header text-center fs-3 fw-bold text-light bg-info rounded-top d-flex justify-content-center align-items-center gap-2">
      <span class="fs-2">üìù</span> –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞: <span class="ms-2">{{ quiz.title }}</span>
    </div>

    <div class="card-body p-4 p-md-5">
      <form method="post" novalidate>
        {% csrf_token %}

        {% if quiz.questions.exists %}
          {% for field in form %}
            <div class="card bg-secondary bg-opacity-75 mb-4 shadow-sm rounded-4 p-4">
              <h5 class="card-title text-info fw-semibold mb-3">–í–æ–ø—Ä–æ—Å {{ forloop.counter }}</h5>
              <label class="form-label fs-5 text-info fw-semibold">{{ field.label }}</label>

              <div class="ms-3 mt-3">
                {% for radio in field %}
                  <div class="form-check form-check-inline">
                    {{ radio.tag }}
                    <label class="form-check-label text-light" for="{{ radio.id_for_label }}">
                      {{ radio.choice_label }}
                    </label>
                  </div>
                {% endfor %}

              </div>

              {% if field.errors %}
                <div class="text-danger small mt-2">{{ field.errors }}</div>
              {% endif %}
            </div>
          {% endfor %}

          <div class="text-center mt-5">
            <button type="submit" class="btn btn-success btn-lg rounded-pill px-5 shadow-sm">
              ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
            </button>
          </div>
        {% else %}
          <div class="alert alert-warning text-center fs-4 py-4 mt-5 rounded-4 shadow">
            –î–ª—è —ç—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞ –≤–æ–ø—Ä–æ—Å—ã –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!
          </div>
        {% endif %}
      </form>
    </div>

    <div class="card-footer text-center bg-transparent border-info">
      {% if user.is_superuser %}
        <div class="d-flex flex-column flex-md-row justify-content-center gap-3 mt-4">
          <a href="{% url 'courses:lesson_detail' lesson.module.course.pk lesson.module.pk lesson.pk %}"
             class="btn btn-outline-success rounded-pill px-4 fw-semibold shadow-sm">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–∫—É
          </a>
          <a href="{% url 'quizzes:add_questions' quiz.pk %}"
             class="btn btn-outline-primary rounded-pill px-4 fw-semibold shadow-sm">
            ‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
